<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Visa Application Tracker â€“ Embassy of Australia</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <h2>Australia Visa Application Tracker</h2>

  <form id="application-form">
    <label for="name">First Name</label>
    <input type="text" id="name">

    <label for="lastname">Last Name</label>
    <input type="text" id="lastname">

    <label for="birthdate">Date of Birth</label>
    <input type="date" id="birthdate">

    <label for="phone">Phone Number</label>
    <input type="text" id="phone">

    <label for="ceu">CEU Number</label>
    <input type="text" id="ceu">

    <label for="passport">Passport Number</label>
    <input type="text" id="passport">

    <label for="nationality_id">Nationality ID</label>
    <input type="text" id="nationality_id">

    <label for="case_number">Case Number</label>
    <input type="text" id="case_number">

    <p id="error-msg">âŒ No matching application found.</p>
    <button id="trackBtn" type="button">ğŸ” Track Application</button>
  </form>

  <div id="info-box">
    <h4>Application Details</h4>
    <table>
      <tbody>
        <tr><td><strong>Full Name:</strong></td><td id="full-name"></td></tr>
        <tr><td><strong>Registration Date:</strong></td><td id="reg-date"></td></tr>
        <tr><td><strong>Accept Number:</strong></td><td id="accept-number"></td></tr>
        <tr><td><strong>Case Number:</strong></td><td id="case-num"></td></tr>
        <tr><td><strong>Interview Date:</strong></td><td id="interview-date"></td></tr>
        <tr><td><strong>Family Members:</strong></td><td id="family-list"></td></tr>
      </tbody>
    </table>
  </div>
  <footer>
    <p>Humanitarian Stay (Temporary) visa (subclass 842)</p>
  </footer>

<script>
  const trackBtn = document.getElementById("trackBtn");
  const inputs = document.querySelectorAll("input");
  const errorMsg = document.getElementById("error-msg");
  const infoBox = document.getElementById("info-box");
  const form = document.getElementById("application-form");

  let dataSet = [];

  // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø² data.json
  fetch("data.json")
    .then(res => res.json())
    .then(data => dataSet = data);

  // Ø¨Ø±Ø±Ø³ÛŒ ØªÚ©Ù…ÛŒÙ„ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§
  inputs.forEach(input => {
    input.addEventListener("input", () => {
      const allFilled = [...inputs].every(inp => inp.value.trim() !== "");
      trackBtn.style.display = allFilled ? "block" : "none";
    });
  });

  // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù‡Ù†Ú¯Ø§Ù… Ú©Ù„ÛŒÚ©
  trackBtn.addEventListener("click", () => {
    const userInput = {
      name: document.getElementById("name").value.trim(),
      lastname: document.getElementById("lastname").value.trim(),
      birthdate: document.getElementById("birthdate").value.trim(),
      phone: document.getElementById("phone").value.trim(),
      ceu: document.getElementById("ceu").value.trim(),
      passport: document.getElementById("passport").value.trim(),
      nationality_id: document.getElementById("nationality_id").value.trim(),
      case_number: document.getElementById("case_number").value.trim()
    };

    const match = dataSet.find(person =>
      person.name === userInput.name &&
      person.lastname === userInput.lastname &&
      person.birthdate === userInput.birthdate &&
      person.phone === userInput.phone &&
      person.ceu === userInput.ceu &&
      person.passport === userInput.passport &&
      person.nationality_id === userInput.nationality_id &&
      person.case_number === userInput.case_number
    );

    if (match) {
      errorMsg.style.display = "none";
      infoBox.style.display = "block";
      form.style.display = "none"; // Ù…Ø®ÙÛŒâ€ŒÚ©Ø±Ø¯Ù† ÙØ±Ù…

      document.getElementById("full-name").innerText = `${match.name} ${match.lastname}`;
      document.getElementById("reg-date").innerText = match.registration_date;
      document.getElementById("accept-number").innerText = match.accept_number;
      document.getElementById("case-num").innerText = match.case_number;
      document.getElementById("interview-date").innerText = match.interview_date;
      document.getElementById("family-list").innerHTML = match.family_members.map(member =>
        `${member.name} (${member.relation})`
      ).join("<br>");

      // Ø¨Ø§Ø²Ú¯Ø´Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù‡ Ø­Ø§Ù„Øª Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø¹Ø¯ Ø§Ø² Û²Û° Ø«Ø§Ù†ÛŒÙ‡
      setTimeout(() => {
        infoBox.style.display = "none";
        form.style.display = "block";
        inputs.forEach(input => input.value = ""); // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù…Ù‚Ø§Ø¯ÛŒØ±
        trackBtn.style.display = "none"; // Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡
      }, 20000); // Û²Û° Ø«Ø§Ù†ÛŒÙ‡ = Û²Û°Û°Û°Û° Ù…ÛŒÙ„ÛŒâ€ŒØ«Ø§Ù†ÛŒÙ‡

    } else {
      infoBox.style.display = "none";
      errorMsg.style.display = "block";
    }
  });
</script>
</body>
</html>
